<% sidebar = partial('sidebar_dev.ejs') %>


<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">			
	<div class="row">
		<ol class="breadcrumb">
			<li><a href="#"><svg class="glyph stroked home"><use xlink:href="#stroked-home"></use></svg></a></li>
			<li class="active">Devices</li>
		</ol>
	</div><!--/.row-->

	<div class="row">
		<div class="col-lg-12">
			<div class="panel panel-default">
				<div class="panel-heading">Device list</div>
				<div class="panel-body" id="devicetable">
					<table data-toggle="table" data-url="tables/devlist.json"  data-show-refresh="true" data-show-toggle="true" data-show-columns="true" data-search="false" data-select-item-name="toolbar1" data-pagination="true" data-sort-name="name" data-sort-order="desc">
						<thead>
						<tr>
							<th data-field="state" data-checkbox="true" >Node ID</th>
							<th data-field="id" data-sortable="true">Node ID</th>
							<th data-field="short_addr" data-sortable="true">Short address</th>
							<th data-field="extended_addr" data-sortable="true">Extended address</th>								
						</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div><!--/.row-->		
</div><!--/.main-->

<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/chart.min.js"></script>
<script src="js/chart-data.js"></script>
<script src="js/easypiechart.js"></script>
<script src="js/easypiechart-data.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/bootstrap-table.js"></script>
<script>
/* Para pedir actualizaciones a Node al cargar la vista
	$(function(){ 
		// Request Update dashboard info. Esta funcion esta en "wscli.js"
		upd_dashboard_info_req();
	});
*/
	!function ($) {
		$(document).on("click","ul.nav li.parent > a > span.icon", function(){		  
			$(this).find('em:first').toggleClass("glyphicon-minus");	  
		}); 
		$(".sidebar span.icon").find('em:first').addClass("glyphicon-plus");
	}(window.jQuery);

	$(window).on('resize', function () {
	  if ($(window).width() > 768) $('#sidebar-collapse').collapse('show')
	})
	$(window).on('resize', function () {
	  if ($(window).width() <= 767) $('#sidebar-collapse').collapse('hide')
	})
	
/* TambiÃ©n se pueden poner funciones para actualizar elementos propios de la vista. Estas funciones se pueden llamar desde el "wscli.js" al recibir algun comando desde Node.
	function updatePieChartR(data) {
		var newValue = data;
		$('#easypiechart-red').data('easyPieChart').update(newValue);
		$('span', $('#easypiechart-red')).text(newValue);
	}
*/	
	function refreshDeviceTable() {
		console.log('devices view: refreshDeviceTable');
		location.reload(true);
	}
	
</script>	
